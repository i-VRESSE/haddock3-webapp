/*
* The workflow builder (@i-vresse/wb-core) uses bootstrap 4 classes to
* style, position and layout the form elements.
*
* This file contains the classes with a tailwindcss equivalent.
*
* Have to prepend .workflow-builder-app to each class to avoid conflicts.
* Using one big nested selector did not work, got `Expected ":" [css-syntax-error]`
*/

.workflow-builder-app h1 {
  @apply text-4xl;
}

.workflow-builder-app legend {
  @apply text-2xl;
}

.workflow-builder-app h4 {
  @apply text-xl;
}

.workflow-builder-app h5 {
  @apply text-xl;
}

/*
Btn classes are copied from app/components/ui/button.tsx
*/

.btn {
  @apply h-10 rounded-md px-4 py-2 text-sm font-medium transition-colors duration-150 ease-in-out flex gap-4;
}

/* variant=secondary */
.btn-light {
  @apply bg-secondary text-start text-secondary-foreground hover:bg-secondary/80;
}

.btn-sm {
  @apply h-12 bg-transparent p-1 text-sm;
}

.grip,
.delete {
  @apply h-auto border-0;
}

/* variant=link */
.btn-link {
  @apply text-primary underline-offset-4 hover:underline;
}

.btn-toolbar {
  @apply flex flex-wrap justify-start align-baseline;
}

.btn-group {
  @apply flex gap-2;
}

.dropdown.btn-group {
  gap: 0rem;
}

/* variant=default */
.workflow-builder-app .btn-primary {
  @apply bg-primary text-primary-foreground hover:bg-primary/90;
}

.btn-outline-secondary {
  @apply hover:bg-accent hover:text-accent-foreground;
}

.btn-visual-panel,
.btn-catalog-node {
  @apply w-full;
}

.btn-visual-node div {
  @apply flex;
}
.workflow-builder-app ul {
  @apply list-inside;
}

/* .workflow-builder-app li {
  @apply pl-2;
} */

.workflow-builder-app .card {
  @apply rounded border border-border;
}

.workflow-builder-app .card-header {
  @apply border border-border bg-secondary p-2 py-4 align-middle text-secondary-foreground;
}

.workflow-builder-app .card-header svg {
  @apply mr-3 inline;
}

.workflow-builder-app .form-label {
  @apply mb-2 inline-block;
}

.workflow-builder-app .form-control {
  @apply w-full p-1.5;
}

.workflow-builder-app .form-check-label {
  @apply ml-2;
}

/* rjsf uses .checkbox in div and input. shadcn uses radix components. */
.workflow-builder-app div .checkbox {
  @apply h-auto w-auto cursor-default border-none;
}

/* Class from app/components/ui/checkbox.tsx */
.workflow-builder-app .form-check-input {
  @apply rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground;
}

.workflow-builder-app .array-item-add,
.workflow-builder-app .object-property-expand {
  /* TODO full width + center plus sign */
  @apply m-4 !w-auto;
}

.workflow-builder-app .container {
  @apply w-full;
}

.workflow-builder-app .container-fluid {
  @apply m-auto w-full;
}

.workflow-builder-app .row {
  @apply flex flex-wrap;
}

.workflow-builder-app .col {
  @apply max-w-full grow basis-0;
}

.workflow-builder-app .col-2 {
  @apply max-w-[16.666667%] flex-1 basis-2/12 px-3;
  word-wrap: break-word;
}

.workflow-builder-app .col-3 {
  @apply w-full max-w-[25%] basis-3/12 px-3;
}

.workflow-builder-app .col-4 {
  flex: 0 0 33.333333%;
  max-width: 33.333333%;
}

.workflow-builder-app .col-5 {
  @apply max-w-[41.666667%] basis-5/12;
}

.workflow-builder-app .col-6 {
  flex: 0 0 50%;
  max-width: 50%;
}

.workflow-builder-app .col-7 {
  flex: 0 0 58.333333%;
  max-width: 58.333333%;
}

.workflow-builder-app .col-8 {
  flex: 0 0 66.666667%;
  max-width: 66.666667%;
}

.workflow-builder-app .col-9 {
  @apply max-w-[75%] basis-9/12;
}

.workflow-builder-app .col-10 {
  @apply max-w-[85%] basis-10/12;
}

.workflow-builder-app .col-11 {
  flex: 0 0 91.666667%;
  max-width: 91.666667%;
}

.workflow-builder-app .col-12 {
  flex: 0 0 100%;
  max-width: 100%;
}

.workflow-builder-app .offset-9 {
  @apply ml-[75%];
}

.workflow-builder-app .nav {
  @apply flex flex-wrap;
}

.workflow-builder-app .nav-tabs {
  @apply border-b-4  border-b-secondary;
}

.workflow-builder-app .nav-link {
  @apply block rounded-t-md bg-muted px-4 py-2 text-muted-foreground;
}

.workflow-builder-app .nav .active {
  @apply border-muted bg-secondary text-secondary-foreground;
}

.workflow-builder-app .justify-content-end {
  @apply justify-end;
}

.workflow-builder-app .d-flex {
  @apply !flex;
}

.workflow-builder-app .align-items-center {
  @apply items-center;
}

.workflow-builder-app .table-field {
  @apply mb-4 border-collapse border border-border;
}

.workflow-builder-app .table-bordered td,
.workflow-builder-app .table-bordered th {
  @apply border border-border bg-background text-foreground;
}

.workflow-builder-app .table-striped tbody tr:nth-of-type(odd) {
  @apply bg-background/90;
}

.workflow-builder-app .table-field th:first-child {
  @apply relative;
}

.workflow-builder-app .popover-header {
  @apply border bg-secondary px-3 py-2 text-secondary-foreground;
}

.workflow-builder-app .popover-body {
  @apply border bg-popover px-3 py-2 text-popover-foreground;
}

.workflow-builder-app .page {
  display: grid;
  grid-template-columns: 9rem minmax(20rem, 1fr) 3fr;
  gap: 1rem;
}

.workflow-builder-app .page > .action-row {
  padding: 0.25rem;
  overflow: unset;
}

.workflow-builder-app .text-danger {
  @apply text-destructive;
}

code .table {
  @apply contents;
}

/*
 * Input classes are copied from app/components/ui/input.tsx
 */

.workflow-builder-app
  input:not([type="checkbox"]):not([type="radio"]):not([type="file"]) {
  @apply flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
}

/* Exclude styling of upload button in workflow column */
.workflow-builder-app .form-group input[type="file"] {
  @apply flex h-10 w-full cursor-pointer rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background  file:border-0 file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
}

.workflow-builder-app .border-danger {
  @apply border-destructive;
}

.workflow-builder-app .alert-danger {
  @apply border-destructive bg-destructive text-destructive-foreground;
}

/* card body  */
.card-body {
  flex: 1 1 auto;
  padding: 1rem;
  overflow: auto;
}

/* bootstrap custom select styles */
.custom-select {
  /* display: inline-block; */
  display: block;
  width: 100%;
  flex: 1;
  height: calc(1.5em + 0.75rem + 2px);
  padding: 0.375rem 1.75rem 0.375rem 0.75rem;
  font-size: 1rem;
  font-weight: 400;
  line-height: 1.5;
  /* color: #495057; */
  /* vertical-align: middle; */
  background: #fff
    url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e")
    right 0.75rem center / 8px 10px no-repeat;
  background-color: hsl(var(--background, "#fff"));
  border: 1px solid #ced4da;
  border-radius: 0.25rem;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  cursor: pointer;
}

.form-group {
  padding: 0.25rem;
}

.text-muted {
  opacity: 0.7;
}

/* Bootstrap popover - used on table question mark */
.popover {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 1060;
  display: block;
  max-width: 276px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif,
    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  font-style: normal;
  font-weight: 400;
  line-height: 1.5;
  text-align: left;
  text-align: start;
  text-decoration: none;
  text-shadow: none;
  text-transform: none;
  letter-spacing: normal;
  word-break: normal;
  word-spacing: normal;
  white-space: normal;
  line-break: auto;
  font-size: 0.875rem;
  word-wrap: break-word;
  background-color: hsl(var(--background, #fff));
  background-clip: padding-box;
  border: 1px solid;
  border-color: hsl(var(--secondary, #ccc));
  border-radius: 0.3rem;
  /* overflow: hidden; */
}

.fade {
  transition: opacity 0.15s linear;
}

.popover-header {
  padding: 0.5rem 0.75rem;
  margin-bottom: 0;
  font-size: 1rem;
  background-color: hsl(var(--secondary, #f7f7f7));
  color: hsl(var(--secondary-foreground, #f4f4f4));
  border-bottom: 1px solid #ebebeb;
  border-top-left-radius: calc(0.3rem - 1px);
  border-top-right-radius: calc(0.3rem - 1px);
}

.bs-popover-auto[x-placement^="bottom"] .popover-header::before,
.bs-popover-bottom .popover-header::before {
  position: absolute;
  top: 0;
  left: 50%;
  display: block;
  width: 1rem;
  margin-left: -0.5rem;
  content: "";
  border-bottom: 1px solid #f7f7f7;
}

.popover .arrow {
  position: absolute;
  display: block;
  width: 1rem;
  height: 0.5rem;
  margin: 0 0.3rem;
}

.bs-popover-auto[x-placement^="bottom"] > .arrow,
.bs-popover-bottom > .arrow {
  top: calc(-0.5rem);
  z-index: 1;
}

.popover .arrow::after,
.popover .arrow::before {
  position: absolute;
  display: block;
  content: "";
  border-color: transparent;
  border-style: solid;
}

.bs-popover-auto[x-placement^="bottom"] > .arrow::before,
.bs-popover-bottom > .arrow::before {
  top: 0;
  border-width: 0 0.55rem 0.55rem 0.55rem;
  border-bottom-color: hsl(var(--secondary, #ccc));
}

.bs-popover-auto[x-placement^="bottom"] > .arrow::after,
.bs-popover-bottom > .arrow::after {
  top: 1px;
  border-width: 0 0.5rem 0.5rem 0.5rem;
  border-bottom-color: hsl(var(--secondary, #ccc));
}

.popover-body {
  padding: 0.5rem 0.75rem;
  color: hsl(var(--foregrond, #212529));
  background-color: hsl(var(--background, #fff));
}

.workflow-builder-app .d-none {
  display: none;
}